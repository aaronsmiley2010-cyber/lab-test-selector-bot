{% extends "pims/base.html" %}

{% block title %}Dashboard - Veterinary PIMS{% endblock %}

{% block content %}
<div class="card">
    <h2>Welcome to Veterinary PIMS</h2>
    <p>Your comprehensive Practice Information Management System with AI-powered features for modern veterinary care.</p>
</div>

<div class="ai-section">
    <h3>
        <svg class="ai-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2"/>
            <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2"/>
            <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2"/>
        </svg>
        AI-Powered Features Available
    </h3>
    <ul style="margin-top: 15px; padding-left: 20px;">
        <li><strong>Symptom Analysis:</strong> AI-powered diagnosis assistance with urgency assessment</li>
        <li><strong>Risk Assessment:</strong> Predictive health risk evaluation based on patient data</li>
        <li><strong>Preventive Care:</strong> Automated recommendations for vaccinations and wellness checks</li>
        <li><strong>Health Trends:</strong> Predictive analytics for patient health trajectories</li>
        <li><strong>Smart Triage:</strong> Intelligent appointment prioritization system</li>
    </ul>
</div>

<div class="card">
    <h2>Recent Patients</h2>
    {% if patients %}
    <table>
        <thead>
            <tr>
                <th>Patient ID</th>
                <th>Name</th>
                <th>Species</th>
                <th>Owner</th>
                <th>Last Updated</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for patient in patients[:10] %}
            <tr>
                <td><strong>{{ patient.patient_id }}</strong></td>
                <td>{{ patient.name }}</td>
                <td>{{ patient.species }}</td>
                <td>{{ patient.owner_name }}</td>
                <td>{{ patient.updated_at[:10] }}</td>
                <td>
                    <a href="{{ url_for('pims.view_patient', patient_id=patient.patient_id) }}" class="btn btn-primary" style="padding: 5px 15px; font-size: 0.9em;">View</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="alert alert-info">
        <p>No patients in the system yet. <a href="{{ url_for('pims.new_patient') }}">Create your first patient profile</a> to get started!</p>
    </div>
    {% endif %}
</div>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
    <div class="card">
        <h2>Quick Actions</h2>
        <div style="display: flex; flex-direction: column; gap: 10px;">
            <a href="{{ url_for('pims.new_patient') }}" class="btn btn-success">Register New Patient</a>
            <a href="{{ url_for('pims.symptom_analyzer') }}" class="btn btn-ai">AI Symptom Analyzer</a>
            <a href="{{ url_for('pims.search_patients') }}" class="btn btn-primary">Search Patients</a>
        </div>
    </div>

    <div class="card">
        <h2>System Statistics</h2>
        <div style="padding: 10px;">
            <p style="margin-bottom: 10px;"><strong>Total Patients:</strong> {{ patients|length }}</p>
            <p style="margin-bottom: 10px;"><strong>AI Features Active:</strong> Yes</p>
            <p style="margin-bottom: 10px;"><strong>System Status:</strong> <span style="color: #28a745;">Online</span></p>
        </div>
    </div>
</div>
{% endblock %}
